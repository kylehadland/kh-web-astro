---
const collection = "blog"
import Posts from "../layouts/Posts.astro"
import Card from "../components/Card.astro"
// const allPosts = await Astro.glob("./*.md")

import { getCollection } from "astro:content"
const allBlogPosts = await getCollection(collection)
---

<Posts>
	<!-- <p>{title}</p> -->
	<!-- <ul>
		{
			allPosts.map((post) => (
				<li>
					<a href={post.url}>{post.frontmatter.title}</a>
				</li>
			))
		}
	</ul> -->

	<section class='grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3'>
		{
			allBlogPosts
				.sort((a, b) => {
					return a.data.date - b.data.date
				})
				.map((post) => (
					<Card
						title={post.data.title}
						url={`/${collection}/${post.slug}`}
						excerpt={post.data.description}
						heroImg={post.data.heroImg}
					/>
					// <article>
					// 	<a href=`/blog/${post.slug}`>{post.data.title}</a>
					// </article>
				))
		}
	</section>
</Posts>
